<!DOCTYPE html>
<html>
<head>
  <link rel="shortcut icon" type="image/png" href="185a4aa2ec6b1238bf9334c18631fbef.png">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="main.css">
  
  <!-- Add CSS for the modal -->
  
    <style>
      /* Body style */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
      }
      
      /* Container style */
      .container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      
      /* Form style */
      form {
        width: 100%;
        max-width: 500px;
        background-color: #ffffff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
      }
      
      /* Input style */
      input.input {
        width: 100%;
        padding: 10px;
        margin-top: 8px;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }
      
      /* Label style */
      label.label {
        font-weight: bold;
        margin-bottom: 5px;
        display: block;
      }
      
      /* Button style */
      .button {
        padding: 10px 20px;
        margin-top: 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s ease;
      }
      
      .button.is-primary {
        background-color: #007bff;
        color: #ffffff;
      }
      
      .button.is-primary:hover {
        background-color: #0056b3;
      }
      
      .button.is-danger {
        background-color: #dc3545;
        color: #ffffff;
      }
      
      .button.is-danger:hover {
        background-color: #c82333;
      }
      
      /* Message style */
      #message {
        margin-top: 20px;
        font-weight: bold;
        padding: 8px;
        border-radius: 4px;
        display: none;
      }
      
      #message.success {
        background-color: #28a745;
        color: #ffffff;
      }
      
      #message.error {
        background-color: #dc3545;
        color: #ffffff;
      }
    </style>
    
</head>
<body>
  
  <section class="hero is-primary is-bold">
    <div class="hero-body">
        <div class="container">
            <form id="form" method="POST">
                <div class="field">
                    <!-- Cart area -->
                    <div class="simplecart_area" name="Items">
                        <div class="simplecart_cart" name="Items">
                            <span class="showCart" name="Items">
                                <span class="fa fa-shopping-cart" name="Items"></span>
                                <span class="simpleCart_quantity" name="Items"></span> items - <span class="simpleCart_total" name="Items"></span>
                                <span class="dropdown fa fa-chevron-circle-down"></span>
                            </span>
                            <div id="cartPopover" name="Items" style="display:none"></div>
                       
                

                
                
                <!-- Order area -->
                <textarea id="cartData" class="simpleCart_items" name="Items" readonly>
                  <!-- This table will be generated dynamically -->
              </textarea>
                
                


          <label class="label">Country/Region</label>
          <input type="text" id="shipping-country" list="shipping-country-list" placeholder="Enter your shipping country" name="shipping-country" class="input" required>
          <datalist id="shipping-country-list">
            <option value="Afghanistan - AF">
            <option value="Albania - AL">
            <option value="Algeria - DZ">
            <option value="American Samoa - AS">
            <option value="Andorra - AD">
            <option value="Angola - AO">
            <option value="Anguilla - AI">
            <option value="Antigua - AG">
            <option value="Argentina - AR">
            <option value="Armenia - AM">
            <option value="Aruba - AW">
            <option value="Australia - AU">
            <option value="Austria - AT">
            <option value="Azerbaijan - AZ">
            <option value="Bahamas - BS">
            <option value="Bahrain - BH">
            <option value="Bangladesh - BD">
            <option value="Barbados - BB">
            <option value="Barbuda - AG">
            <option value="Belarus - BY">
            <option value="Belgium - BE">
            <option value="Belize - BZ">
            <option value="Benin - BJ">
            <option value="Bermuda - BM">
            <option value="Bhutan - BT">
            <option value="Bolivia - BO">
            <option value="Bonaire - AN">
            <option value="Bosni - BA">
            <option value="Botswana - BW">
            <option value="Brazil - BR">
            <option value="British Guyana - GY">
            <option value="British Virgin Islands - VG">
            <option value="Brunei - BN">
            <option value="Bulgaria - BG">
            <option value="Burkina Faso - BF">
            <option value="Burundi - BI">
            <option value="Cambodia - KH">
            <option value="Cameroon - CM">
            <option value="Canada - CA">
            <option value="Canary Islands - ES">
            <option value="Cape Verde - CV">
            <option value="Cayman Islands - KY">
            <option value="Chad - TD">
            <option value="Channel Islands - GB">
            <option value="Chile - CL">
            <option value="China, People'S Republic Of - CN">
            <option value="Colombia - CO">
            <option value="Congo - CG">
            <option value="Congo, Dem Rep Of - CD">
            <option value="Cook Islands - CK">
            <option value="Costa Rica - CR">
            <option value="Croatia - HR">
            <option value="Curacao - CW">
            <option value="Cyprus - CY">
            <option value="Czech Republic - CZ">
            <option value="Denmark - DK">
            <option value="Djibouti - DJ">
            <option value="Dominica - DM">
            <option value="Dominican Republic - DO">
            <option value="Ecuador - EC">
            <option value="Egypt - EG">
            <option value="El Salvador - SV">
            <option value="England (United Kingdom) - GB">
            <option value="Eritrea - ER">
            <option value="Estonia - EE">
            <option value="Ethiopia - ET">
            <option value="Faeroe Islands - FO">
            <option value="Fiji - FJ">
            <option value="Finland - FI">
            <option value="France - FR">
            <option value="French Guiana - GF">
            <option value="French Polynesia - PF">
            <option value="Gabon - GA">
            <option value="Gambia - GM">
            <option value="Georgia, Republic Of - GE">
            <option value="Germany - DE">
            <option value="Ghana - GH">
            <option value="Gibraltar - GI">
            <option value="Grand Cayman - KY">
            <option value="Great Britain - GB">
            <option value="Great Thatch Island - VG">
            <option value="Great Tobago Island - VG">
            <option value="Greece - GR">
            <option value="Greenland - GL">
            <option value="Grenada - GD">
            <option value="Guadeloupe - GP">
            <option value="Guam - GU">
            <option value="Guatemala - GT">
            <option value="Guinea - GN">
            <option value="Guyana - GY">
            <option value="Guyane - GF">
            <option value="Haiti - HT">
            <option value="Holland - NL">
            <option value="Honduras - HN">
            <option value="Hong Kong - HK">
            <option value="Hungary - HU">
            <option value="Iceland - IS">
            <option value="India - IN">
            <option value="Indonesia - ID">
            <option value="Iraq - IQ">
            <option value="Ireland, Northern - GB">
            <option value="Ireland, Republic Of - IE">
            <option value="Israel - IL">
            <option value="Italy - IT">
            <option value="Ivory Coast - CI">
            <option value="Jamaica - JM">
            <option value="Japan - JP">
            <option value="Jordan - JO">
            <option value="Jost Van Dyke Island - VG">
            <option value="Kazakhstan - KZ">
            <option value="Kenya - KE">
            <option value="Korea, South (South Korea) - KR">
            <option value="Kuwait - KW">
            <option value="Kyrgyzstan - KG">
            <option value="Laos - LA">
            <option value="Latvia - LV">
            <option value="Lebanon - LB">
            <option value="Lesotho - LS">
            <option value="Liberia - LR">
            <option value="Libya - LY">
            <option value="Liechtenstein - LI">
            <option value="Lithuania - LT">
            <option value="Luxembourg - LU">
            <option value="Macau - MO">
            <option value="Macedonia - MK">
            <option value="Madagascar - MG">
            <option value="Malawi - MW">
            <option value="Malaysia - MY">
            <option value="Maldives, Republic Of - MV">
            <option value="Mali - ML">
            <option value="Malta - MT">
            <option value="Marshall Islands - MH">
            <option value="Martinique - MQ">
            <option value="Mauritania - MR">
            <option value="Mauritius - MU">
            <option value="Mexico - MX">
            <option value="Micronesia - FM">
            <option value="Moldova - MD">
            <option value="Monaco - MC">
            <option value="Mongolia - MN">
            <option value="Montenegro - ME">
            <option value="Montserrat - MS">
            <option value="Morocco - MA">
            <option value="Mozambique - MZ">
            <option value="Namibia - NA">
            <option value="Nepal - NP">
            <option value="Netherlands (Holland) - NL">
            <option value="Netherlands Antilles (Caribbean) - AN">
            <option value="Nevis - KN">
            <option value="New Caledonia - NC">
            <option value="New Guinea - PG">
            <option value="New Zealand - NZ">
            <option value="Nicaragua - NI">
            <option value="Niger - NE">
            <option value="Nigeria - NG">
            <option value="Norfolk Island - AU">
            <option value="Norman Island - VG">
            <option value="Norway - NO">
            <option value="Oman - OM">
            <option value="Pakistan - PK">
            <option value="Palau - PW">
            <option value="Panama - PA">
            <option value="Papua New Guinea - PG">
            <option value="Paraguay - PY">
            <option value="Peru - PE">
            <option value="Philippines - PH">
            <option value="Poland - PL">
            <option value="Portugal - PT">
            <option value="Puerto Rico - US">
            <option value="Qatar - QA">
            <option value="Reunion - RE">
            <option value="Romania - RO">
            <option value="Rota - MP">
            <option value="Russia - RU">
            <option value="Rwanda - RW">
            <option value="Saba - AN">
            <option value="Saipan - MP">
            <option value="San Marino - IT">
            <option value="Saudi Arabia - SA">
            <option value="Scotland - GB">
            <option value="Senegal - SN">
            <option value="Serbia - RS">
            <option value="Seychelles - SC">
            <option value="Singapore - SG">
            <option value="Slovak Republic - SK">
            <option value="Slovenia - SI">
            <option value="South Africa, Republic Of - ZA">
            <option value="Soviet Union">
            <option value="Spain - ES">
            <option value="Sri Lanka - LK">
            <option value="St. Barthelemy - GP">
            <option value="St. Christopher - KN">
            <option value="St. Croix Island - VI">
            <option value="St. Eustatius - AN">
            <option value="St. John - VI">
            <option value="St. Kitts And Nevis - KN">
            <option value="St. Lucia - LC">
            <option value="St. Maarten - AN">
            <option value="St. Martin - AN">
            <option value="St. Thomas - VI">
            <option value="St. Vincent - VC">
            <option value="Suriname - SR">
            <option value="Swaziland - SZ">
            <option value="Sweden - SE">
            <option value="Switzerland - CH">
            <option value="Tahiti - PF">
            <option value="Taiwan, Republic Of China - TW">
            <option value="Tanzania - TZ">
            <option value="Thailand - TH">
            <option value="Tinian - MP">
            <option value="Togo - TG">
            <option value="Tortola Island - VG">
            <option value="Trinidad And Tobago - TT">
            <option value="Tunisia - TN">
            <option value="Turkey - TR">
            <option value="Turks And Caicos Islands - TC">
            <option value="U S Virgin Islands - VI">
            <option value="Uganda - UG">
            <option value="Ukraine - UA">
            <option value="Union Island - VC">
            <option value="United Arab Emirates - AE">
            <option value="United Kingdom - GB">
            <option value="United States - US">
            <option value="Uruguay - UY">
            <option value="Uzbekistan - UZ">
            <option value="Vanuatu - VU">
            <option value="Vatican City - IT">
            <option value="Venezuela - VE">
            <option value="Vietnam - VN">
            <option value="Virgin Islands - DS">
            <option value="Wales (United Kingdom) - GB">
            <option value="Wallis & Futuna Islands - WF">
            <option value="Yemen, The Republic Of - YE">
            <option value="Zaire - ZR">
            <option value="Zambia - ZM">
            <option value="Zimbabwe - ZW">
          </datalist>
          <label class="label">Client Name</label>
          <input class="input" type="text" placeholder="Enter client name" name="Client Name" required>

          <label class="label">Email Address</label>
          <input class="input" type="email" placeholder="Enter your email" name="Email" required>

          <label class="label">Mobile Number</label>
          <input class="input" type="text" placeholder="Enter your mobile number" name="Mobile Number" required>

          <label class="label">Address</label>
          <input class="input" type="text" placeholder="Enter your address" name="Street,house/apartment/unit" required>

          <input class="input" type="text" placeholder="Apt, Suite, Unit, etc (Optional)" name="Apt,Suite,Unit,etc">

          <input class="input" type="text" placeholder="Province" name="Province" required>

          <input class="input" type="text" placeholder="City" name="City" required>

          <input class="input" type="text" placeholder="ZIP code" name="ZIP code" required>
          

            <div class="field is-grouped">
              <div class="control">
                <button class="simpleCart_checkout" type="button" id="submit-button">
                  Submit
              </button>
            </div>
            </div>
          
      </form>
  </div>
  <div id="message"></div>
</div>
</section>
   
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
jQuery(document).ready(function () {
  // Function to populate textarea with cart items
  function displayCartData() {
    var cartText = "Cart Items:\n";

    // Extract items from .simpleCart_items
    var items = $('.simpleCart_items').text();
    // Split items by new line
    var itemArray = items.split("\n");

    // Loop through each item
    itemArray.forEach(function(item) {
      // Append item to cartText
      cartText += item.trim() + "\n";
    });

    // Set the formatted cart data in the textarea
    $('#cartData').val(cartText);
  }

  // Call the function to display cart data when the page loads
  displayCartData();

  $('.showCart').on('click', function () {
    $('#cartPopover').slideToggle('fast');
    $('.showCart span.dropdown').toggleClass('fa-chevron-circle-down fa-chevron-circle-up');
  });
});
</script>
 
<script>    
jQuery(document).ready(function () {
    // Click event listener for the submit button
    $('#submit-button').on('click', function (e) {
        e.preventDefault(); // Prevent the default form submission
        
        // Perform form validation
        if (validateForm()) {
            // If validation passes, trigger the checkout process
            simpleCartCheckout();
        } else {
            // If validation fails, show a pop-up alert
            alert("Please fill in all required fields."); // Alert box displaying the message
            return false; // Prevent any further processing
        }
    });

    // Function to perform form validation
    function validateForm() {
        // You can implement your validation logic here
        // For example, check if required fields are filled
        var isValid = true;
        // Example validation logic:
        $('#form input[required]').each(function () {
            if (!$(this).val().trim()) {
                isValid = false;
                return false; // Exit the loop early if any field is empty
            }
        });
        return isValid;
    }


    // Function to trigger PayPal checkout
    function simpleCartCheckout() {
        // Trigger the checkout process using simpleCart_checkout class
        $('.simpleCart_checkout').click();
    }

    // Listen for the checkout success event
    $(document).on('checkoutSuccess', function() {
        // Once the checkout is successful, submit the form
        submitForm();
    });

    // Function to submit the form data
    function submitForm() {
        // Collect the form data
        var formData = new FormData($('#form')[0]);
        var keyValuePairs = [];
        for (var pair of formData.entries()) {
            keyValuePairs.push(pair[0] + "=" + pair[1]);
        }
        var formDataString = keyValuePairs.join("&");

        // Send a POST request to your Google Apps Script
        fetch(
            "https://script.google.com/macros/s/AKfycbyssfbsvJnuYsxq2pjnxUNIumVPQE5MXzzsT-8DMFWYximXOm82TMNfkTB99p_w_75V/exec",
            {
                redirect: "follow",
                method: "POST",
                body: formDataString,
                headers: {
                    "Content-Type": "text/plain;charset=utf-8",
                },
            }
        )
        .then(function (response) {
            // Check if the request was successful
            if (response) {
                return response; // Assuming your script returns JSON response
            } else {
                throw new Error("Failed to submit the form.");
            }
        })
        .then(function (data) {
            // Display a success message
            document.getElementById("message").textContent =
                "Data submitted successfully!";
            document.getElementById("message").style.display = "block";
            document.getElementById("message").style.backgroundColor = "green";
            document.getElementById("message").style.color = "beige";
            document.getElementById("submit-button").disabled = false;
            document.getElementById("form").reset();

            setTimeout(function () {
                document.getElementById("message").textContent = "";
                document.getElementById("message").style.display = "none";
            }, 2600);
        })
        .catch(function (error) {
            // Handle errors, you can display an error message here
            console.error(error);
            document.getElementById("message").textContent =
                "An error occurred while submitting the form.";
            document.getElementById("message").style.display = "block";
        });
    }
});
</script>

  <!-- Your other script includes -->
  <script src="jquery-1.11.3.min.js"></script>
  <script src="simpleCart.min.js"></script>
  <script src="handlebars.min.js"></script>
  <script src="main.js"></script>
</body>
</html>